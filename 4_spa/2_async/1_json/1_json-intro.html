<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <h1>Async</h1>

    <h2>Json</h2>

    <p>
        JSON (JavaScriptObjectNotation) ist ein text-datenformat, das der javascript objekt-syntax folgt. Obwohl es dieser syntax folgt, kann es auch außerhalb von JavaScript benutzt werden. Viele programmiersprachen, datenbanken und andere tools besitzen die fähigkeit json zu lesen, zu schreiben oder generell auszuwerten, weswegen es sich sehr gut eignet um konfigurationen für programme oder entwicklerumgebungen zu definieren. JSON dateien erkennt man an der endung <b>.json</b>.
    </p>

    <p>
        Da json dokumente aus text bestehen, müssen wir sie für javascript nach dem einladen erst zu einem objekt umwandeln, oder sie müssen von javascript zu json als text umgewandelt werden. Dafür besitzt JavaScript das sogenannte JSON object, mit diesem kann man PARSEN (json zu javscript umwandeln) und STRINGIFIEN (von javascript zu json umwandeln).
    </p>
    
    <script>
        /**
         * @method JSON.parse();
         * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse
         * @description Die methode .parse(); konvertiert einen string zu JSON, es ist sehr wichtig das dieser string sich an die JSON syntax hält.
         * @param { string } string - der JSON string den wir zu einem Objekt umwandeln wollen
         * @returns { object } das umgewandelte JavaScript Object mit JSON syntax
         */

        // wir erstellen einen beispielstring...
        const jsonParseExample = '{ "isValid": true, "amount": 15, "name": "Max" }';
        console.log(jsonParseExample);

        // ... und nutzen die methode .parse(); um den string zu einem Objekt zu konvertieren.
        const convertedJson = JSON.parse(jsonParseExample);

        // jetzt können wir auf die daten wie bei einem objekt zugreifen, da wir den string in ein solches umgewandelt haben:
        console.log(convertedJson);
        console.log(convertedJson.isValid);
        console.log(convertedJson.amount);
        console.log(convertedJson.name);

        console.log("=".repeat(40));

        /**
         * @method JSON.stringify();
         * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify
         * @description Die methode .stringify(); konvertiert ein Javascript Objekt/Array zu einem JSON kompatiblen string.
         * @param { object } value - Das objekt das wir umwandeln wollen
         * @param { array } replacer - Optional kann man hier ein array angeben, das bestimmt, welche werte bei der konvertierung übernommen werden
         * @param { number } space - Die die anzahl von leerzeichen zim string am anfang des parameters zu bestimmen
         * @returns { string } Der JSON kompatible string
         */

        // wir erstellen ein objekt ...
        const objectExample = {
            firstName: "Max",
            lastName: "Mustermann",
            age: 25,
            isAdmin: false,
        };

        console.log(objectExample);

        // ... und konveriteren dieses objekt per .stringify(); zu einem JSON kompatiblen string
        const convertedObject = JSON.stringify(objectExample);
        console.log(convertedObject);

        // erweitertes beispiel:
        //                                      OBJEKT         WERTE                 LEERZEICHEN (oder '\t' für TAB)
        const convertedObject2 = JSON.stringify(objectExample, ["firstName", "age"], 4);
        console.log(convertedObject2);

        // um leerzeichen anzugeben, aber keine werte zu bestimmen, können wir als zweiten parameter "null" setzen, um der .stringify(); methode mitzuteilen, das wir alle werte haben wollen.
        const convertedObject3 = JSON.stringify(objectExample, null, 4);
        console.log(convertedObject3);
    </script>

    <h3>JSON Datei</h3>

    <p>
        Wie schon erwähnt ähnelt JSON der javascript object syntax, booleans, nummern und string, sowie objekte und arrays können wir ohne probleme in json nutzen der einzige unterschied ist, das wir parameterschlüssel auch als strings hinterlegen müssen, also mit "gänsefüßchen", oder "double-quotes".
    </p>

    <pre>
        <code>
    {
        "name": "Michael Knight",
        "car": "Kitt",
        "age": 45,
        "isCool": true
    }
        </code>
    </pre>

    <p>
        Um eine lokale json datei in einem javascript projekt (nicht in einem html/js projekt) zu laden, würde es reichen, die datei mit .require(); oder import anzufordern.
    </p>

    <pre>
        <code>
        const jsonFile = require('./beispiel.json');
        </code>
    </pre>

    <p>
        Durch diese methode des imports wird die datei automatisch gelesen und sogar in ein javascript objekt umgewandelt, und wir könnten die daten jetzt direkt nutzen, wie bei einem objekt:
    </p>

    <pre>
        <code>
        console.log(jsonFile);
        console.log(jsonFile.car);
        </code>
    </pre>

    <p>
        Dieser weg wird allerdings NICHT empfohlen, da während des ladens der json datei das programm nicht weiter läuft, es auch änderungen in der datei nicht mitbekommt.
    </p>

</body>
</html>
